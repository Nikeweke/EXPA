{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{192:function(e,a,o){\"use strict\";o.r(a);var r=o(0),t=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,a=e.$createElement,o=e._self._c||a;return o(\"div\",{staticClass:\"content\"},[o(\"h1\",{attrs:{id:\"docker\"}},[o(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Docker\")]),e._v(\" \"),o(\"h4\",{attrs:{id:\"содержание\"}},[o(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#содержание\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Содержание\")]),e._v(\" \"),o(\"ul\",[o(\"li\",[o(\"strong\",[e._v(\"Basic info\")])]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"Windows\")])]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"Commands\")])]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"Commands for few\")])]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"Windows\")])]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"Achtung!\")])]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"Docker push and pull image\")])]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"Вопросы и Ответы\")])])]),e._v(\" \"),o(\"hr\"),e._v(\" \"),o(\"h2\",{attrs:{id:\"basic-info\"}},[o(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#basic-info\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Basic info\")]),e._v(\" \"),o(\"ul\",[o(\"li\",[o(\"strong\",[e._v(\"Образ\")]),e._v(\" - это набор файлов, необходимых для работы приложения на голой машине с установленным Docker.\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"Контейнер\")]),e._v(\" - это запущенный образ. Из образов создаються и запускаютьс контейнеры.\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"Dockerfile\")]),e._v(\" -  инструкции для построения образа. Это простой способ автоматизировать процесс создания образа.\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker-compose.yml\")]),e._v(\" - инструкции для сборки нескольких контейнеров и их взаимодействия\")])]),e._v(\" \"),o(\"h2\",{attrs:{id:\"windows\"}},[o(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#windows\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Windows\")]),e._v(\" \"),o(\"p\",[e._v(\"Когда тестируете на Windows то порт будет - \"),o(\"strong\",[e._v(\"192.168.99.100\")]),e._v(\", а на Linux - \"),o(\"code\",[e._v(\"127.0.0.1\")]),e._v(\" OR \"),o(\"code\",[e._v(\"localhost\")])]),e._v(\" \"),o(\"h2\",{attrs:{id:\"achtung\"}},[o(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#achtung\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Achtung!\")]),e._v(\" \"),o(\"ul\",[o(\"li\",[e._v(\"при создание образа командой \"),o(\"code\",[e._v(\"docker build -t [image-name] .\")]),e._v(\" в конце - Не забудьте точку !\")]),e._v(\" \"),o(\"li\",[e._v(\"В приложении, которое переносите в docker-образ, меняйте хост с \"),o(\"code\",[e._v(\"localhost\")]),e._v(\" -> \"),o(\"code\",[e._v(\"0.0.0.0\")])]),e._v(\" \"),o(\"li\",[o(\"code\",[e._v(\"CMD\")]),e._v(\"  может быть только одно в Dockerfile\")]),e._v(\" \"),o(\"li\",[e._v(\"Когда тестируете на Windows то порт будет - \"),o(\"code\",[e._v(\"192.168.99.100\")]),e._v(\", а на Linux - \"),o(\"code\",[e._v(\"127.0.0.1\")]),e._v(\" OR \"),o(\"code\",[e._v(\"localhost\")])])]),e._v(\" \"),o(\"h2\",{attrs:{id:\"tools\"}},[o(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#tools\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Tools\")]),e._v(\" \"),o(\"ul\",[o(\"li\",[e._v(\"FromLatest - https://www.fromlatest.io/#/ - для оптимизации \"),o(\"code\",[e._v(\"Dockerfile\")])]),e._v(\" \"),o(\"li\",[e._v(\"Docker Toolbox - десктопное приложение для Windows и Mac\")]),e._v(\" \"),o(\"li\",[e._v(\"Docker Client (CLI) -  только для Linux\")])]),e._v(\" \"),o(\"h2\",{attrs:{id:\"commands\"}},[o(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#commands\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Commands\")]),e._v(\" \"),o(\"ul\",[o(\"li\",[o(\"strong\",[e._v(\"docker run -d -P [image-name]\")]),e._v(\" - запустить образ, тем самым создаеться контейнер, если образ не находитьс локально тогда исчет на докер хабе и скачиваеться, запускаеться. \"),o(\"code\",[e._v(\"-d\")]),e._v(\" -  открепить процес от консоли,  \"),o(\"code\",[e._v(\"-P\")]),e._v(\" - призначить рандомный порт к порту приложения внутри Docker\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker run -it [image-name] sh\")]),e._v(\" - запустить образ и зайти внутрь контейнера\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker run -it --rm [image-name] sh\")]),e._v(\" - запустить образ и зайти внутрь контейнера + удалить контейнер после закрытия\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker build -t [image-name] .\")]),e._v(\" - забилдить образ на основе \"),o(\"code\",[e._v(\"Dockerfile\")])]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker logs [container-id]\")]),e._v(\" - получить логи с контейнера\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker exec -it [container-id] /bin/bash\")]),e._v(\" - войти в контейнер\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker pull [image-name]\")]),e._v(\" - Скачать образ с docker hub\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker images\")]),e._v(\" - покажет сколько образов есть локально\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker rmi [image-name] [image-name] -f\")]),e._v(\" - удалить  или образы\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker ps\")]),e._v(\" - покажет контейнеры\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker ps -a\")]),e._v(\" - покажет контейнеры + которые были запущены\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker run [image-name] [command]\")]),e._v(\" - запустить образ и выполнить внутри команду\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker run -it [image-name] sh\")]),e._v(\" - зайти внутрь контейнера и открыть консоль контейнера. Команда run с флагом -it подключает интерактивный tty в контейнер.\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker rm $(docker ps -a -q -f status=exited)\")]),e._v(\" - удалить все контейнеры с статусом exited\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker run -d -P --name [your-name-to-container] [image-name]\")]),e._v(\" - Флаг \"),o(\"code\",[e._v(\"-d\")]),e._v(\" открепит (detach) терминал, флаг \"),o(\"code\",[e._v(\"-P\")]),e._v(\" сделает все открытые порты публичными и случайными, и, наконец, флаг \"),o(\"code\",[e._v(\"--name\")]),e._v(\" это имя, которое мы хотим дать контейнеру.\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker port [container-name]\")]),e._v(\" - просмотреть порты контейнера\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker run -p 8000:3000 [image-name]\")]),e._v(\" - запустить контейнер с перебросом запроса с 0.0.0.0:8000 -> 3000. Слева порт локальный - справа порт Докера, указанный в \"),o(\"code\",[e._v(\"Dockerfile (expose)\")]),e._v(\" на который будет переброс запросов\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker push [nickname]/[image-name]\")]),e._v(\" - запушить свой образ на свой репозиторий\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"docker commit [container-id] [image-name:tag]\")]),e._v(\" - сделать из контейнера образ\")])]),e._v(\" \"),o(\"h2\",{attrs:{id:\"commands-for-few\"}},[o(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#commands-for-few\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Commands for few\")]),e._v(\" \"),o(\"ul\",[o(\"li\",[o(\"strong\",[e._v(\"sudo docker kill $(sudo docker ps -q)\")]),e._v(\" - убить все контейнеры. \"),o(\"code\",[e._v(\"-q\")]),e._v(\" - показать только ID\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"sudo docker rm $(sudo docker ps -q -a)\")]),e._v(\" - удалить все контейнеры\")]),e._v(\" \"),o(\"li\",[o(\"strong\",[e._v(\"sudo docker rmi $(sudo docker images -q)\")]),e._v(\" - удалить все образы\")])]),e._v(\" \"),o(\"h2\",{attrs:{id:\"docker-push-and-pull-image\"}},[o(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#docker-push-and-pull-image\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Docker push and pull image\")]),e._v(\" \"),o(\"div\",{staticClass:\"language-bash extra-class\"},[o(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[o(\"code\",[o(\"span\",{attrs:{class:\"token comment\"}},[e._v(\"# Enter your credentials\")]),e._v(\"\\ndocker login\\n\\n\"),o(\"span\",{attrs:{class:\"token comment\"}},[e._v(\"# Rename your image if it is not like: nickanme/image-name\")]),e._v(\"\\ndocker tag my_image nickname/my_image\\n\\n\"),o(\"span\",{attrs:{class:\"token comment\"}},[e._v(\"# Push your image to your repositories\")]),e._v(\"\\ndocker push nickname/my_image\\n\\n\"),o(\"span\",{attrs:{class:\"token comment\"}},[e._v(\"# Pull this image\")]),e._v(\"\\ndocker pull nickname/my_image\\n\")])])]),o(\"h2\",{attrs:{id:\"вопросы-и-ответы\"}},[o(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#вопросы-и-ответы\",\"aria-hidden\":\"true\"}},[e._v(\"#\")]),e._v(\" Вопросы и Ответы\")]),e._v(\" \"),o(\"p\",[o(\"strong\",[e._v(\"1)\")]),e._v(\" Как уменьшить размер образа? допустим nodejs official весит 400 мб в свернутом состоянии.\")]),e._v(\" \"),o(\"blockquote\",[o(\"ul\",[o(\"li\",[e._v(\"Использовать еще меньший отцовский образ, например: \"),o(\"code\",[e._v(\"ubuntu - 43mb\")]),e._v(\" или \"),o(\"code\",[e._v(\"alpine - 5mb\")])]),e._v(\" \"),o(\"li\",[e._v(\"Попробовать найти уже нужный образ с наименьшим размером, например: \"),o(\"code\",[e._v(\"alpine-node - 67mb\")])]),e._v(\" \"),o(\"li\",[e._v(\"Не устанавливать отладочные иструменты, например: \"),o(\"code\",[e._v(\"vim\")]),e._v(\" или \"),o(\"code\",[e._v(\"curl\")])]),e._v(\" \"),o(\"li\",[e._v(\"Больше здесь: https://hackernoon.com/tips-to-reduce-docker-image-sizes-876095da3b34\")])])]),e._v(\" \"),o(\"p\",[o(\"strong\",[e._v(\"2)\")]),e._v(\" Можно ли из контейнера сделать образ?\")]),e._v(\" \"),o(\"blockquote\",[o(\"p\",[e._v(\"Да можно: \"),o(\"code\",[e._v(\"docker commit [container-id] [image-name:tag]\")])])]),e._v(\" \"),o(\"p\",[o(\"strong\",[e._v(\"3)\")]),e._v(\" Если не удаеться скачать репозиторий, а сеть все таки есть, тогда что?\")]),e._v(\" \"),o(\"div\",{staticClass:\"language- extra-class\"},[o(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[o(\"code\",[e._v(\"docker-machine restart default \\ndocker login\\n\")])])]),o(\"p\",[o(\"strong\",[e._v(\"4)\")]),e._v(\" Под Windows установил Docker-Toolbox. Но подключиться могу только через PS в окне Toolbox. Как подключиться через cmd или cmder.exe?\")]),e._v(\" \"),o(\"div\",{staticClass:\"language- extra-class\"},[o(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[o(\"code\",[e._v(\"docker-machine env --shell cmd default \\n@FOR /f \\\"tokens=*\\\" %i IN ('docker-machine env --shell cmd default') DO @%i\\n\")])])]),o(\"p\",[o(\"strong\",[e._v(\"5)\")]),e._v(\" Как проверить что докер запущен на Windows?\")]),e._v(\" \"),o(\"div\",{staticClass:\"language- extra-class\"},[o(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[o(\"code\",[e._v(\"docker-machine active\\n\")])])])])}],!1,null,null,null);t.options.__file=\"docker.md\";a.default=t.exports}}]);","extractedComments":[]}